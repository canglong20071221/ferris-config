# --- BLUETOOTH & CONNECTION STABILITY (AMD/Legion Tuned) ---
CONFIG_ZMK_BLE=y
CONFIG_BT=y
CONFIG_BT_MAX_CONN=5
CONFIG_BT_MAX_PAIRED=5

# 1. Boost Signal: Helps signal penetrate through the laptop chassis/interference
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# 2. Disable High Speed: Keeps connection at robust 1Mbps (Essential for AMD reboot fix)
CONFIG_BT_CTLR_PHY_2M=n

# 3. Connection Parameters (The "Anti-Drop" Tuning)
# Min Interval 32 (40ms) / Max 48 (60ms): Slower checks prevent driver overload.
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=32
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=48
# Latency 30: Allows keyboard to skip 30 intervals if idle (saves battery).
CONFIG_BT_PERIPHERAL_PREF_LATENCY=30
# Timeout 400 (4000ms): 4-second grace period before dropping connection.
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# --- BATTERY ---
CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_BATTERY_REPORT_INTERVAL=180
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y

# --- POWER MANAGEMENT ---
CONFIG_ZMK_IDLE_TIMEOUT=30000
# Enter deep sleep after 1 hour (3600000 ms)
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=3600000
# Soft Off REMOVED (Physical switch used instead)
# CONFIG_ZMK_PM_SOFT_OFF=y

# --- MOUSE ---
CONFIG_ZMK_POINTING=y

# --- COMBOS (Required for Vertical Barring) ---
CONFIG_ZMK_COMBO_MAX_COMBOS_PER_KEY=20
CONFIG_ZMK_COMBO_MAX_KEYS_PER_COMBO=4

# --- REPORT & BEHAVIORS ---
CONFIG_ZMK_BEHAVIORS_QUEUE_SIZE=512

# --- ZMK STUDIO ---
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_STUDIO_LOCK_IDLE_TIMEOUT_SEC=300

# --- SYSTEM ---
# Name must be < 16 chars
CONFIG_ZMK_KEYBOARD_NAME="sweep split kbd"
